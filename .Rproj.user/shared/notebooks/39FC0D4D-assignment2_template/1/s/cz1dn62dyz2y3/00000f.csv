"0","# Get demographic data from ACS"
"0","demographics <- get_acs("
"0","  geography = ""tract"","
"0","  variables = c("
"0","    total_pop = ""B01003_001"","
"0","    median_income = ""B19013_001"""
"0","  ),"
"0","  state = ""PA"","
"0","  year = 2022,"
"0","  survey = ""acs5"","
"0","  output = ""wide"""
"0",")"
"2","Getting data from the 2018-2022 5-year ACS
"
"2","Using FIPS code '42' for state 'PA'
"
"0","over_65_vars <- c("
"0","  ""B01001_020"", ""B01001_021"", ""B01001_022"", ""B01001_023"", ""B01001_024"", ""B01001_025"","
"0","  ""B01001_044"", ""B01001_045"", ""B01001_046"", ""B01001_047"", ""B01001_048"", ""B01001_049"""
"0",")"
"0",""
"0","over_65 <- get_acs("
"0","  geography = ""tract"","
"0","  state = ""PA"","
"0","  year = 2022,"
"0","  survey = ""acs5"","
"0","  variables = over_65_vars,"
"0","  output = ""wide"""
"0",")"
"2","Getting data from the 2018-2022 5-year ACS
"
"2","Using FIPS code '42' for state 'PA'
"
"0","# sum across all the *_E columns (estimates)"
"0","over_65 <- transform("
"0","  over_65,"
"0","  over65_total = B01001_020E + B01001_021E + B01001_022E +"
"0","                 B01001_023E + B01001_024E + B01001_025E +"
"0","                 B01001_044E + B01001_045E + B01001_046E +"
"0","                 B01001_047E + B01001_048E + B01001_049E"
"0",")"
"0",""
"0","# Join to tract boundaries"
"0","demographics_boundaries <- census_tracts %>%"
"0","  left_join(demographics, by = ""GEOID"") %>%"
"0","  left_join(over_65 %>% select(GEOID, over65_total), by = ""GEOID"")"
"0",""
"0","#How many tracts have missing income data?"
"0","sum(is.na(demographics$median_incomeE))"
"1","[1]"
"1"," 63"
"1","
"
"0","#Median income across all PA census tracts?"
"0","median(demographics$median_incomeE, na.rm = TRUE)"
"1","[1]"
"1"," 70188"
"1","
"
