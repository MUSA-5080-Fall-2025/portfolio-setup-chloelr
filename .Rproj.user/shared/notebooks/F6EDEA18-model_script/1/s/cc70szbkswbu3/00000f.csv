"0","#| output: false"
"0",""
"0","# Restrict to residential only"
"0","residential_categories <- c("
"0","  ""APARTMENTS > 4 UNITS"","
"0","  ""MULTI FAMILY"","
"0","  ""SINGLE FAMILY"","
"0","  ""MIXED USE"""
"0",")"
"0","residential_data <- sf_data %>%"
"0","  filter(category_code_description %in% residential_categories,"
"0","         year(sale_date) %in% c(2023, 2024),"
"0","         mailing_city_state == ""PHILADELPHIA PA"","
"0","         sale_price > 10"
"0","         )"
"0",""
"0","table(residential_data$category_code_description)"
"1","
"
"1","    MIXED USE "
"1"," MULTI FAMILY "
"1","SINGLE FAMILY "
"1","
"
"1","          518 "
"1","         1681 "
"1","        21412 "
"1","
"
"0","# Making sure the file saved to the repo is the trimmed data (to stay below GitHub data limits)"
"0","st_write(residential_data, ""./data/OPA_data.geojson"", driver = ""GeoJSON"", delete_dsn = TRUE, quiet = TRUE)"
"0","file.exists(""./data/OPA_data.geojson"")"
"1","[1]"
"1"," TRUE"
"1","
"
"0","OPA_data <- st_read(""./data/OPA_data.geojson"", quiet = TRUE) %>% "
"0","  st_transform(2272)"
"0",""
"0","# OPA_data -> cutting mostly NA columns or irrelevant columns for this model."
"0","OPA_data <- OPA_data %>%"
"0","  select(-c("
"0","  cross_reference, date_exterior_condition, exempt_land, fireplaces, fuel, garage_type, house_extension, mailing_address_2, mailing_care_of, market_value_date, number_of_rooms, other_building, owner_2, separate_utilities, sewer, site_type, street_direction, suffix, unfinished, unit, utility"
"0","  ))"
"0",""
"0","names(OPA_data)"
"1"," [1]"
"1"," ""assessment_date""              "
"1"," ""basements""                    "
"1"," ""beginning_point""              "
"1","
"
"1"," [4]"
"1"," ""book_and_page""                "
"1"," ""building_code""                "
"1"," ""building_code_description""    "
"1","
"
"1"," [7]"
"1"," ""category_code""                "
"1"," ""category_code_description""    "
"1"," ""census_tract""                 "
"1","
"
"1","[10]"
"1"," ""central_air""                  "
"1"," ""depth""                        "
"1"," ""exempt_building""              "
"1","
"
"1","[13]"
"1"," ""exterior_condition""           "
"1"," ""frontage""                     "
"1"," ""garage_spaces""                "
"1","
"
"1","[16]"
"1"," ""general_construction""         "
"1"," ""geographic_ward""              "
"1"," ""homestead_exemption""          "
"1","
"
"1","[19]"
"1"," ""house_number""                 "
"1"," ""interior_condition""           "
"1"," ""location""                     "
"1","
"
"1","[22]"
"1"," ""mailing_address_1""            "
"1"," ""mailing_city_state""           "
"1"," ""mailing_street""               "
"1","
"
"1","[25]"
"1"," ""mailing_zip""                  "
"1"," ""market_value""                 "
"1"," ""number_of_bathrooms""          "
"1","
"
"1","[28]"
"1"," ""number_of_bedrooms""           "
"1"," ""number_stories""               "
"1"," ""off_street_open""              "
"1","
"
"1","[31]"
"1"," ""owner_1""                      "
"1"," ""parcel_number""                "
"1"," ""parcel_shape""                 "
"1","
"
"1","[34]"
"1"," ""quality_grade""                "
"1"," ""recording_date""               "
"1"," ""registry_number""              "
"1","
"
"1","[37]"
"1"," ""sale_date""                    "
"1"," ""sale_price""                   "
"1"," ""state_code""                   "
"1","
"
"1","[40]"
"1"," ""street_code""                  "
"1"," ""street_designation""           "
"1"," ""street_name""                  "
"1","
"
"1","[43]"
"1"," ""taxable_building""             "
"1"," ""taxable_land""                 "
"1"," ""topography""                   "
"1","
"
"1","[46]"
"1"," ""total_area""                   "
"1"," ""total_livable_area""           "
"1"," ""type_heater""                  "
"1","
"
"1","[49]"
"1"," ""view_type""                    "
"1"," ""year_built""                   "
"1"," ""year_built_estimate""          "
"1","
"
"1","[52]"
"1"," ""zip_code""                     "
"1"," ""zoning""                       "
"1"," ""pin""                          "
"1","
"
"1","[55]"
"1"," ""building_code_new""            "
"1"," ""building_code_description_new"""
"1"," ""objectid""                     "
"1","
"
"1","[58]"
"1"," ""geometry""                     "
"1","
"
