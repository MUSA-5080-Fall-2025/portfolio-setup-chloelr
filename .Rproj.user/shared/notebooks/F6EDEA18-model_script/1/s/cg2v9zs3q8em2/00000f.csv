"0",""
"0","#spatial joins"
"0","price_by_nhood <- neighbor_points %>%"
"0","  st_drop_geometry() %>%"
"0","  group_by(NAME) %>%"
"0","  dplyr::summarize("
"0","    median_price = median(sale_price, na.rm = TRUE),"
"0","    n_sales = n()"
"0","  )"
"0",""
"0","nhoods_prices <- nhoods %>%"
"0","  left_join(price_by_nhood, by = ""NAME"")"
"0",""
"0","#setting median house price classes"
"0","nhoods_prices <- nhoods_prices %>%"
"0","  mutate("
"0","    price_class = cut(median_price,"
"0","                      breaks = c(0, 400000, 600000, 800000, 1000000, Inf),"
"0","                      labels = c(""Under $400k"", ""$400k-$600k"", ""$600k-$800k"", "
"0","                                 ""$800k-$1M"", ""Over $1M""),"
"0","                      include.lowest = TRUE)"
"0","  )"
"0",""
"0","#mapping"
"0","ggplot() +"
"0","  geom_sf(data = nhoods_prices, aes(fill = price_class), "
"0","          color = ""white"", size = 0.5) +"
"0","  scale_fill_brewer("
"0","    name = ""Median Price"","
"0","    palette = ""YlOrRd"",  # Try also: ""Reds"", ""OrRd"", ""YlGnBu"", ""PuRd"""
"0","    na.value = ""grey90"","
"0","    direction = 1  # Use -1 to reverse (dark = low)"
"0","  ) +"
"0","  labs("
"0","    title = ""Median Home Prices by Philadlephia Neighborhood"","
"0","  ) +"
"0","  theme_void() +"
"0","  theme("
"0","    legend.position = ""right"","
"0","    plot.title = element_text(face = ""bold"", size = 14),"
"0","    legend.title = element_text(face = ""bold"")"
"0","  )"
"0",""
